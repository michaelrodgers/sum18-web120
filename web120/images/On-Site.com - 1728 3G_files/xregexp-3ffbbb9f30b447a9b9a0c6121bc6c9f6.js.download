/*!
 * XRegExp v2.0.0
 * (c) 2007-2012 Steven Levithan <http://xregexp.com/>
 * MIT License
 */
var XRegExp;XRegExp=XRegExp||function(e){"use strict";function t(e,t,n){var r;for(r in u.prototype)u.prototype.hasOwnProperty(r)&&(e[r]=u.prototype[r]);return e.xregexp={"captureNames":t,"isNative":!!n},e}function n(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function r(e,r,a){if(!u.isRegExp(e))throw new TypeError("type RegExp expected");var i=x.replace.call(n(e)+(r||""),S,"");return a&&(i=x.replace.call(i,new RegExp("["+a+"]+","g"),"")),e=e.xregexp&&!e.xregexp.isNative?t(u(e.source,i),e.xregexp.captureNames?e.xregexp.captureNames.slice(0):null):t(new RegExp(e.source,i),null,!0)}function a(e,t){var n=e.length;if(Array.prototype.lastIndexOf)return e.lastIndexOf(t);for(;n--;)if(e[n]===t)return n;return-1}function i(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function l(e){return"all"===(e=e||{})||e.all?e={"natives":!0,"extensibility":!0}:i(e,"string")&&(e=u.forEach(e,/[^\s,]+/,function(e){this[e]=!0},{})),e}function c(e,t,n,r){var a,i,l=y.length,c=null;I=!0;try{for(;l--;)if(("all"===(i=y[l]).scope||i.scope===n)&&(!i.trigger||i.trigger.call(r))&&(i.pattern.lastIndex=t,(a=h.exec.call(i.pattern,e))&&a.index===t)){c={"output":i.handler.call(r,a,n),"match":a};break}}catch(s){throw s}finally{I=!1}return c}function s(e){u.addToken=p[e?"on":"off"],f.extensibility=e}function o(e){RegExp.prototype.exec=(e?h:x).exec,RegExp.prototype.test=(e?h:x).test,String.prototype.match=(e?h:x).match,String.prototype.replace=(e?h:x).replace,String.prototype.split=(e?h:x).split,f.natives=e}var u,p,g,f={"natives":!1,"extensibility":!1},x={"exec":RegExp.prototype.exec,"test":RegExp.prototype.test,"match":String.prototype.match,"replace":String.prototype.replace,"split":String.prototype.split},h={},d={},y=[],E="default",w="class",m={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},v=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,S=/([\s\S])(?=[\s\S]*\1)/g,b=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,N=x.exec.call(/()??/,"")[1]===e,R=RegExp.prototype.sticky!==e,I=!1,k="gim"+(R?"y":"");return p={"on":function(e,t,n){n=n||{},e&&y.push({"pattern":r(e,"g"+(R?"y":"")),"handler":t,"scope":n.scope||E,"trigger":n.trigger||null}),n.customFlags&&(k=x.replace.call(k+n.customFlags,S,""))},"off":function(){throw new Error("extensibility must be installed before using addToken")}},(u=function(n,a){if(u.isRegExp(n)){if(a!==e)throw new TypeError("can't supply flags when constructing one RegExp from another");return r(n)}if(I)throw new Error("can't call the XRegExp constructor within token definition functions");var i,l,s,o=[],p=E,g={"hasNamedCapture":!1,"captureNames":[],"hasFlag":function(e){return a.indexOf(e)>-1}},f=0;if(n=n===e?"":String(n),a=a===e?"":String(a),x.match.call(a,S))throw new SyntaxError("invalid duplicate regular expression flag");for(n=x.replace.call(n,/^\(\?([\w$]+)\)/,function(e,t){if(x.test.call(/[gy]/,t))throw new SyntaxError("can't use flag g or y in mode modifier");return a=x.replace.call(a+t,S,""),""}),u.forEach(a,/[\s\S]/,function(e){if(k.indexOf(e[0])<0)throw new SyntaxError("invalid regular expression flag "+e[0])});f<n.length;)(i=c(n,f,p,g))?(o.push(i.output),f+=i.match[0].length||1):(l=x.exec.call(m[p],n.slice(f)))?(o.push(l[0]),f+=l[0].length):("["===(s=n.charAt(f))?p=w:"]"===s&&(p=E),o.push(s),++f);return t(new RegExp(o.join(""),x.replace.call(a,/[^gimy]+/g,"")),g.hasNamedCapture?g.captureNames:null)}).addToken=p.off,u.cache=function(e,t){var n=e+"/"+(t||"");return d[n]||(d[n]=u(e,t))},u.escape=function(e){return x.replace.call(e,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},u.exec=function(e,t,n,a){var i,l=r(t,"g"+(a&&R?"y":""),!1===a?"y":"");return l.lastIndex=n=n||0,i=h.exec.call(l,e),a&&i&&i.index!==n&&(i=null),t.global&&(t.lastIndex=i?l.lastIndex:0),i},u.forEach=function(e,t,n,r){for(var a,i=0,l=-1;a=u.exec(e,t,i);)n.call(r,a,++l,e,t),i=a.index+(a[0].length||1);return r},u.globalize=function(e){return r(e,"g")},u.install=function(e){e=l(e),!f.natives&&e.natives&&o(!0),!f.extensibility&&e.extensibility&&s(!0)},u.isInstalled=function(e){return!!f[e]},u.isRegExp=function(e){return i(e,"regexp")},u.matchChain=function(e,t){return function n(e,r){var a,i=t[r].regex?t[r]:{"regex":t[r]},l=[],c=function(e){l.push(i.backref?e[i.backref]||"":e[0])};for(a=0;a<e.length;++a)u.forEach(e[a],i.regex,c);return r!==t.length-1&&l.length?n(l,r+1):l}([e],0)},u.replace=function(t,n,a,i){var l,c=u.isRegExp(n),s=n;return c?(i===e&&n.global&&(i="all"),s=r(n,"all"===i?"g":"","all"===i?"":"g")):"all"===i&&(s=new RegExp(u.escape(String(n)),"g")),l=h.replace.call(String(t),s,a),c&&n.global&&(n.lastIndex=0),l},u.split=function(e,t,n){return h.split.call(e,t,n)},u.test=function(e,t,n,r){return!!u.exec(e,t,n,r)},u.uninstall=function(e){e=l(e),f.natives&&e.natives&&o(!1),f.extensibility&&e.extensibility&&s(!1)},u.union=function(e,t){var n,r,a,l,c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,s=0,o=function(e,t,a){var i=r[s-n];if(t){if(++s,i)return"(?<"+i+">"}else if(a)return"\\"+(+a+n);return e},p=[];if(!i(e,"array")||!e.length)throw new TypeError("patterns must be a nonempty array");for(l=0;l<e.length;++l)a=e[l],u.isRegExp(a)?(n=s,r=a.xregexp&&a.xregexp.captureNames||[],p.push(u(a.source).source.replace(c,o))):p.push(u.escape(a));return u(p.join("|"),t)},u.version="2.0.0",h.exec=function(t){var r,i,l,c,s;if(this.global||(c=this.lastIndex),r=x.exec.apply(this,arguments)){if(!N&&r.length>1&&a(r,"")>-1&&(l=new RegExp(this.source,x.replace.call(n(this),"g","")),x.replace.call(String(t).slice(r.index),l,function(){var t;for(t=1;t<arguments.length-2;++t)arguments[t]===e&&(r[t]=e)})),this.xregexp&&this.xregexp.captureNames)for(s=1;s<r.length;++s)(i=this.xregexp.captureNames[s-1])&&(r[i]=r[s]);this.global&&!r[0].length&&this.lastIndex>r.index&&(this.lastIndex=r.index)}return this.global||(this.lastIndex=c),r},h.test=function(e){return!!h.exec.call(this,e)},h.match=function(e){if(u.isRegExp(e)){if(e.global){var t=x.match.apply(this,arguments);return e.lastIndex=0,t}}else e=new RegExp(e);return h.exec.call(e,this)},h.replace=function(e,t){var n,r,l,c,s=u.isRegExp(e);return s?(e.xregexp&&(n=e.xregexp.captureNames),e.global||(c=e.lastIndex)):e+="",i(t,"function")?r=x.replace.call(String(this),e,function(){var r,a=arguments;if(n)for(a[0]=new String(a[0]),r=0;r<n.length;++r)n[r]&&(a[0][n[r]]=a[r+1]);return s&&e.global&&(e.lastIndex=a[a.length-2]+a[0].length),t.apply(null,a)}):(l=String(this),r=x.replace.call(l,e,function(){var e=arguments;return x.replace.call(String(t),v,function(t,r,i){var l;if(r){if((l=+r)<=e.length-3)return e[l]||"";if((l=n?a(n,r):-1)<0)throw new SyntaxError("backreference to undefined group "+t);return e[l+1]||""}if("$"===i)return"$";if("&"===i||0==+i)return e[0];if("`"===i)return e[e.length-1].slice(0,e[e.length-2]);if("'"===i)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(i=+i,!isNaN(i)){if(i>e.length-3)throw new SyntaxError("backreference to undefined group "+t);return e[i]||""}throw new SyntaxError("invalid token "+t)})})),s&&(e.global?e.lastIndex=0:e.lastIndex=c),r},h.split=function(t,n){if(!u.isRegExp(t))return x.split.apply(this,arguments);var r,a=String(this),i=t.lastIndex,l=[],c=0;return n=(n===e?-1:n)>>>0,u.forEach(a,t,function(e){e.index+e[0].length>c&&(l.push(a.slice(c,e.index)),e.length>1&&e.index<a.length&&Array.prototype.push.apply(l,e.slice(1)),r=e[0].length,c=e.index+r)}),c===a.length?x.test.call(t,"")&&!r||l.push(""):l.push(a.slice(c)),t.lastIndex=i,l.length>n?l.slice(0,n):l},(g=p.on)(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===E)return e[0];throw new SyntaxError("invalid escape "+e[0])},{"scope":"all"}),g(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),g(/(?:\(\?#[^)]*\))+/,function(e){return x.test.call(b,e.input.slice(e.index+e[0].length))?"":"(?:)"}),g(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?a(this.captureNames,e[1])+1:+e[1],n=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+e[0]);return"\\"+t+(n===e.input.length||isNaN(e.input.charAt(n))?"":"(?:)")}),g(/(?:\s+|#.*)+/,function(e){return x.test.call(b,e.input.slice(e.index+e[0].length))?"":"(?:)"},{"trigger":function(){return this.hasFlag("x")},"customFlags":"x"}),g(/\./,function(){return"[\\s\\S]"},{"trigger":function(){return this.hasFlag("s")},"customFlags":"s"}),g(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("can't use integer as capture name "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),g(/\\(\d+)/,function(e,t){if(!(t===E&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+e[0]);return e[0]},{"scope":"all"}),g(/\((?!\?)/,function(){return this.hasFlag("n")?"(?:":(this.captureNames.push(null),"(")},{"customFlags":"n"}),"undefined"!=typeof exports&&(exports.XRegExp=u),u}();