(function(e){e.swipeOptions={minBeforePreventDefault:10,maxVertical:40,minHorizontal:100,maxWrongHorizontal:10,maxTime:1000};function g(k){if(k.originalEvent.touches){return k.originalEvent.touches.length}return 1}function j(k){var l=k;if(l.originalEvent.touches&&l.originalEvent.touches[0]){l=l.originalEvent.touches[0]}return l}function f(m){var n=m.data("startTime");var s=new Date().getTime();var r=m.data("initialX");var p=m.data("initialY");var l=m.data("maxX");var q=m.data("minX");var k=m.data("maxY");var o=m.data("minY");return{timeRange:s-n,totalX:l-q,totalY:k-o,totalLeft:r-q,totalRight:l-r}}function c(k){return k.timeRange<=e.swipeOptions.maxTime&&k.totalY<=e.swipeOptions.maxVertical}function b(k,l){var m="totalLeft";if(l=="left"){m="totalRight"}return k[m]<=e.swipeOptions.maxWrongHorizontal}function h(l,m){var k="totalRight";if(m=="left"){k="totalLeft"}return l[k]>=e.swipeOptions.minHorizontal}function a(k,l){return c(k)&&b(k,l)}function i(k,l){return c(k)&&b(k,l)&&h(k,l)}function d(k){return{setup:function(m,l){e(this).bind("touchstart",e.event.special["swipe"+k].handler)},teardown:function(l){e(this).unbind("touchstart",e.event.special["swipe"+k].handler)},handler:function(m){var p=j(m);var o=e(this);o.data("initialX",p.pageX);o.data("initialY",p.pageY);o.data("maxX",p.pageX);o.data("minX",p.pageX);o.data("maxY",p.pageY);o.data("minY",p.pageY);o.data("startTime",new Date().getTime());var l,n;n=function(q){var t=j(q);var s=e(this);s.data("maxX",Math.max(s.data("maxX"),t.pageX));s.data("minX",Math.min(s.data("minX"),t.pageX));s.data("maxY",Math.max(s.data("maxY"),t.pageY));s.data("minY",Math.min(s.data("minY"),t.pageY));var r=f(s);if(g(q)>1||!a(r,k)){s.unbind("touchmove",n);s.unbind("touchend touchcancel",l);return}if(r.totalX>e.swipeOptions.minBeforePreventDefault){q.preventDefault()}};l=function(s){var y=e(this);var t=y.data("startTime");var x=new Date().getTime();var r=y.data("maxX");var v=y.data("minX");var q=y.data("maxY");var u=y.data("minY");var w=f(y);y.unbind("touchmove",n);y.unbind("touchend touchcancel",l);if(!i(w,k)){return}s.preventDefault();s.type="swipe"+k;e.event.handle.apply(this,arguments)};o.bind("touchmove",n);o.one("touchend touchcancel",l)}}}e.event.special.swipeleft=d("left");e.event.special.swiperight=d("right")})(jQuery);
