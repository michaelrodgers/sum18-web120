(function(h){var i=function(x,w){return((Math.random()*(w-x))+x)*1000};var d=function(z,w,C,B){var x=this;var y=i(w.time[0],w.time[1]);if(C&&B){y=i(C,B)}var A=function(){h(x).hide();d.call(x,!z,w)};setTimeout(function(){var D=w.rightImg;var F="-1000px";var E="2000px";if(z){D=w.leftImg;F="2000px";E="-1000px"}h(x).prop("src",D).css("left",F).show().animate({left:E},{duration:w.duration,complete:A,easing:"linear"})},y)};var e={startTime:[5,10],time:[30,60],startLeft:true,duration:4000,leftImg:null,rightImg:null,height:"300px"};var s=0;h.runAcross=function(w){s+=1;h("body").append('<img class="runAcross'+s+'" style="display: none;" src="'+w.leftImg+'"/>');h(".runAcross"+s).runAcross(w);return this};h.fn.runAcross=function(w){w=h.extend({},e,w);h(this).hide().css("position","absolute").css("zIndex","10000").css("top",w.height);d.call(this,w.startLeft,w,w.startTime[0],w.startTime[1]);return this};h.random=function(x,w){if(w===undefined){w=x;x=0}return Math.floor(Math.random()*(w-x))+x};h.randomFloat=function(x,w){if(w===undefined){w=x;x=0}return(Math.random()*(w-x))+x};h.fn.randomIndex=function(){if(this.size()==1){return 0}if(this.size()<1){return -1}return h.random(this.size())};h.fn.randomElement=function(){if(this.size()<=1){return this}return h(this[this.randomIndex()])};h.fn.randomItem=function(){if(this.size()<=1){return this}return this[this.randomIndex()]};h.fn.shuffle=function(){var w=[];this.each(function(y,z){w.push({item:z,rand:Math.random()})});w=w.sort(function(z,y){return z.rand-y.rand});for(var x=0;x<w.length;x++){w[x]=w[x].item}return h(w)};h.fn.take=function(y){if(!y||y<=0){return h([])}if(this.size()<=y){return this}var w=[];for(var x=0;x<y;x++){w.push(this[x])}return h(w)};h.fn.takeRandomly=function(w){return this.shuffle().take(w)};h.fn.moveAnimate=function(z,y,w,x){h(this).css({marginLeft:z.x,marginTop:z.y}).animate({marginLeft:y.x,marginTop:y.y},{duration:w,easing:"linear",complete:x})};h.fn.spriteAnimate=function(x,y){var w=this;h.each(x,function(A,z){if(z.start){w.queue(function(){try{z.start()}finally{h(this).dequeue()}})}if(z.delay&&z.delay>0){w.delay(z.delay)}w.queue(function(){w.css({backgroundPosition:z.position});h(this).dequeue()});if(z.stop){w.queue(function(){try{z.stop()}finally{h(this).dequeue()}})}});if(y){w.queue(function(){h(this).dequeue();y()})}return this};h.fn.popupCharacter=function(F,z,E){var A=h(F.html);var D=A.find(".eyes");this.append(A);var B="1px";var C=A.css("margin-top");var w=parseInt(C.replace("px",""),10);var x=A.css("height");var y=(w-A.height())+"px";A.css({height:B,marginTop:C,position:"absolute"});if(z&&z>0){A.delay(z)}A.animate({height:x,marginTop:y},600);if(F.additionalAnimations){F.additionalAnimations(A)}A.queue(function(){if(F.remain){if(E){E()}}else{A.animate({height:B,marginTop:C},600,function(){A.remove();if(E){E()}})}h(this).dequeue()});return this};var g=function(){var x=h.random(1,5);var z=h.random(15,h(window).width()-15);var w=h('<div class="snow flake'+x+'" style="margin-left: '+z+'px;"></div>');h("body").prepend(w);var y=h.random(6000,20000);w.animate({marginTop:h(window).height()-15},{duration:y,easing:"linear",complete:function(){w.fadeOut(200,function(){w.remove()})}})};h.letItSnow=function(){g();setTimeout(h.letItSnow,h.random(5,1000))};var t=function(w){if(w!==undefined&&j[w]!==undefined){return j[w]}return undefined};var p=function(x,w){if(w!==undefined&&j[w]!==undefined){x.color=w}return x};var u=function(w,A,z){return p({x:w,y:A},z)};var o=function(y,w){if(w===undefined||j[w]===undefined){return y}for(var x=0;x<y.length;x++){p(y[x],w)}return y};h.circlePoints=function(A,x){x=x||{};var w=[];for(var z=0;z<A;z++){var y=2*Math.PI*(z*1)/(A*1);w.push(u(Math.cos(y),Math.sin(y),x.color))}return w};h.stringPoints=function(C,x){x=x||{};var A=[];var z=C.length*-1.5/2;for(var y=0;y<C.length;y++){var B=h.charPoints(C.charAt(y),x);for(var w=0;w<B.length;w++){B[w].x+=z}z+=1.5;A=h.merge(A,B)}return A};h.charPoints=function(x,w){w=w||{};if(x=="1"){return o([{x:-0.4,y:-0.4},{x:-0.2,y:-0.6},{x:0,y:-0.9},{x:0,y:-0.6},{x:0,y:-0.3},{x:0,y:0.1},{x:0,y:0.5},{x:-0.3,y:0.9},{x:0,y:0.9},{x:0.3,y:0.9}],w.color)}else{if(x=="2"){return o([{x:-0.6,y:-0.5},{x:-0.3,y:-0.8},{x:0.1,y:-0.9},{x:0.4,y:-0.7},{x:0.4,y:-0.2},{x:0.1,y:0.1},{x:-0.1,y:0.3},{x:-0.4,y:0.6},{x:-0.5,y:0.9},{x:-0.1,y:0.9},{x:0.3,y:0.9},{x:0.7,y:0.9}],w.color)}else{if(x=="3"){return o([{x:-0.4,y:-0.5},{x:-0.3,y:-0.8},{x:0.1,y:-0.9},{x:0.4,y:-0.7},{x:0.3,y:-0.3},{x:0,y:-0.1},{x:0.3,y:0.1},{x:0.5,y:0.4},{x:0.4,y:0.8},{x:-0.1,y:0.8},{x:-0.4,y:0.6}],w.color)}else{if(x=="4"){return o([{x:-0.4,y:-0.8},{x:-0.4,y:-0.5},{x:-0.4,y:-0.1},{x:-0.1,y:-0.1},{x:0.2,y:-0.8},{x:0.2,y:-0.5},{x:0.2,y:-0.1},{x:0.2,y:0.3},{x:0.2,y:0.6},{x:0.2,y:0.9}],w.color)}else{if(x=="5"){return o([{x:0.3,y:-0.8},{x:0,y:-0.8},{x:-0.4,y:-0.8},{x:-0.4,y:-0.5},{x:-0.4,y:-0.2},{x:-0.1,y:-0.2},{x:0.2,y:-0.1},{x:0.4,y:0.2},{x:0.4,y:0.6},{x:0.1,y:0.8},{x:-0.2,y:0.8},{x:-0.5,y:0.7}],w.color)}else{if(x=="6"){return o([{x:0.2,y:-0.8},{x:-0.1,y:-0.7},{x:-0.3,y:-0.5},{x:-0.5,y:-0.2},{x:-0.5,y:0.1},{x:-0.5,y:0.5},{x:-0.2,y:0.7},{x:0.1,y:0.8},{x:0.4,y:0.6},{x:0.4,y:0.2},{x:0.2,y:0},{x:-0.2,y:0}],w.color)}else{if(x=="7"){return o([{x:-0.5,y:-0.9},{x:-0.1,y:-0.9},{x:0.2,y:-0.9},{x:0.5,y:-0.9},{x:0.3,y:-0.6},{x:0.1,y:-0.2},{x:-0.1,y:0.1},{x:-0.3,y:0.4},{x:-0.4,y:0.7}],w.color)}else{if(x=="8"){return o([{x:0,y:-0.9},{x:-0.3,y:-0.8},{x:-0.4,y:-0.6},{x:-0.3,y:-0.3},{x:0,y:-0.1},{x:0.3,y:0.1},{x:0.5,y:0.5},{x:0.3,y:0.8},{x:0,y:0.9},{x:-0.3,y:0.8},{x:-0.5,y:0.5},{x:-0.3,y:0.1},{x:0.3,y:-0.3},{x:0.4,y:-0.6},{x:0.3,y:-0.8}],w.color)}else{if(x=="9"){return o([{x:0,y:-0.2},{x:-0.3,y:-0.2},{x:-0.5,y:-0.4},{x:-0.5,y:-0.7},{x:-0.3,y:-0.9},{x:0.1,y:-0.9},{x:0.3,y:-0.7},{x:0.3,y:-0.4},{x:0.3,y:0},{x:0.3,y:0.4},{x:0.2,y:0.7},{x:-0.1,y:0.9},{x:-0.4,y:0.9}],w.color)}else{if(x=="0"){return o([{x:0,y:-0.9},{x:0.3,y:-0.7},{x:0.4,y:-0.4},{x:0.5,y:0},{x:0.4,y:0.4},{x:0.2,y:0.8},{x:0,y:0.9},{x:-0.2,y:0.8},{x:-0.4,y:0.4},{x:-0.5,y:0},{x:-0.4,y:-0.4},{x:-0.3,y:-0.7}],w.color)}else{throw new Error("charPoints can only deal with 0-9 for now... add more characters as needed.")}}}}}}}}}}};h.linePoints=function(E,F,H){H=h.extend({numPoints:2,includeFirst:true,includeLast:false},H||{});var D=H.numPoints;var y=0;var A=D;if(!H.includeFirst){y=1;A++;D++}if(!H.includeLast){D++}var I=[];var C=E.x*1;var z=E.y*1;var x=F.x*1;var w=F.y*1;for(var B=y;B<=A;B++){var G=(B*1)/(D*1);I.push(u((x-C)*G+C,(w-z)*G+z,H.color))}return I};var n=function(x,w){this.element=x;this.options=w};n.prototype.tick=function(z){if(!this.startTime){this.startTime=z;return}var y=z-this.startTime;var x=(y*1)/(this.options.duration*1);var w=false;if(x>=1){x=1;y=this.options.duration;k.remove(this);w=true}this.options.tick.call(this.element,x,y);if(w&&h.isFunction(this.options.complete)){this.options.complete.call(this.element)}};var k={queue:[],running:false,add:function(w){this.queue.push(w);if(!this.running){this.start()}},remove:function(x){for(var w=0;w<this.queue.length;w++){if(this.queue[w]===x){this.queue.splice(w,1);return}}},tick:function(){var x=new Date().valueOf();for(var w=0;w<this.queue.length;w++){this.queue[w].tick(x)}if(this.queue.length==0){this.stop()}},start:function(){if(this.running){return}var w=this;this.intervalId=setInterval(function(){w.tick()},h.fx.interval);this.running=true},stop:function(){if(!this.running){return}clearInterval(this.intervalId);this.queue=[];this.running=false}};h.fn.customAnimate=function(w){if(!h.isFunction(w.tick)){throw new Error("options.tick must be a function!")}if(w.duration<1){throw new Error("options.duration must be at least 1!")}return this.each(function(){k.add(new n(this,w))})};h.linearEasing=function(y,x,w){return((x-y)*w)+y};h.rapidDecreaseEasing=function(z,y,w,x){if(!x){x=2}return h.rapidIncreaseEasing(z,y,w,1/x)};h.rapidIncreaseEasing=function(z,y,w,x){if(!x){x=2}return((y-z)*Math.pow(w,x))+z};var l=6;var j={pink:0,red:1,yellow:2,green:3,blue:4,purple:5,white:6};var m=11;var a=150;var q=0.07;var c=11;var v=11;var f=50;var b=function(w){return"https://"+location.hostname+w};var r=function(w,x,A){A=A||function(){};if(!x.sparks){x.sparks=h.circlePoints(x.numSparks)}var z=function(F){var I=x.sparks[F];var C=x.color;if(t(I.color)!==undefined){C=t(I.color)}var D=-a*C;var H=h('<div style="pointer-events: none; position: absolute; top: 0; z-index: 10000; width: '+c+"px; height: "+v+"px; font-size: 0; background-position: "+(m*-3)+"px "+D+"px; background-image: url('"+b("/extras/holidays/general/fireworks.png")+"');\"></div>");h("body").prepend(H);I.x=I.x*x.burstSize+w.x;I.y=I.y*x.burstSize+w.y;var B=function(){H.remove();if(F==(x.numSparks-1)){A()}};var E=x.burstTime;var G=0;H.css({marginLeft:w.x,marginTop:w.y}).customAnimate({duration:E,tick:function(L,K){var J=(Math.floor(K/f))%4;I.y+=(K-G)*q;I.y=Math.min(I.y,h(window).height()-v-5);G=K;H.css({backgroundPositionY:(J*-v)+D,marginLeft:h.rapidDecreaseEasing(w.x,I.x,L,4),marginTop:h.rapidDecreaseEasing(w.y,I.y,L,4),opacity:h.rapidIncreaseEasing(1,0,L)})},complete:B})};for(var y=0;y<x.numSparks;y++){z(y)}};h.firework=function(w,x){if(h("html").is(".msie")){return}if(h.isFunction(w)){x=w;w={}}w=w||{};if(w.color){w.color=t(w.color)}w=h.extend({color:h.random(l),delay:1000,flyTime:1500,burstTime:1000,numSparks:20,burstSize:Math.min(h(window).width(),h(window).height())/4},w);if(w.sparks){w.numSparks=w.sparks.length}setTimeout(function(){var A=h('<div style="pointer-events: none; position: absolute; top: 0; z-index: 10000; width: '+m+"px; height: "+a+"px; font-size: 0; background-position: 0px "+(-a*w.color)+"px; background-image: url('"+b("/extras/holidays/general/fireworks.png")+"');\"></div>");h("body").prepend(A);var E=w.to;if(!E){var z=h(window).width()/3;var B=h(window).width()/3;var D=h(window).height()/3;var y=h(window).width()*0.1;E={x:h.randomFloat(B,B+z),y:h.randomFloat(y,y+D)}}var C={x:E.x,y:h(window).height()-a-5};A.css({marginLeft:C.x,marginTop:C.y}).customAnimate({duration:w.flyTime,tick:function(I,H){var G=h.rapidDecreaseEasing(C.x,E.x,I);var J=h.rapidDecreaseEasing(C.y,E.y,I);var F=(Math.floor(H/f))%3;A.css({marginLeft:G,marginTop:J,backgroundPositionX:(F*-m),opacity:h.linearEasing(1,0,I)})},complete:function(){A.remove();r(E,w,x)}})},w.delay)}})(jQuery);
